import{s as Ae,o as He,p as se,k as P,i as m,b as j,e as y,j as M,d as w,f as I,q as ve,v as B,l as u,t as b,h as E,m as q,n as Me}from"../chunks/scheduler.C1FoT2GD.js";import{S as Fe,i as Re,c as x,b as ee,m as te,t as T,a as O,d as le,g as ie,e as oe}from"../chunks/index.DFmxPlw4.js";import{e as Z,u as ge,o as ke}from"../chunks/each.Bmx-BImQ.js";import{b as fe}from"../chunks/paths.DOnYZ1f4.js";import{p as Te}from"../chunks/stores.ZuLyBo9H.js";import{P as Oe,c as Ue,g as Ie,f as ce}from"../chunks/kit.B5hTzwHX.js";import{P as qe,L as Ge,C as Ne}from"../chunks/page.CWCv2ozC.js";import{P as Be}from"../chunks/player.rNBuc2kc.js";function De(_,e,t){const l=_.slice();return l[7]=e[t],l}function Ce(_,e,t){const l=_.slice();return l[10]=e[t],l}function Pe(_,e,t){const l=_.slice();return l[10]=e[t],l}function Qe(_){let e,t,l,r,a="Final Ranking",h,f,n=[],c=new Map,i,v,D,A="Brackets",S,V,p=[],g=new Map,$;e=new Ge({props:{$$slots:{default:[Xe]},$$scope:{ctx:_}}});let N=Z(_[1].rankings);const F=s=>s[10].address;for(let s=0;s<N.length;s+=1){let o=Pe(_,N,s),k=F(o);c.set(k,n[s]=Ve(k,o))}let H=Z(_[1].brackets);const K=s=>s[7].idx;for(let s=0;s<H.length;s+=1){let o=De(_,H,s),k=K(o);g.set(k,p[s]=je(k,o))}return{c(){x(e.$$.fragment),t=j(),l=y("div"),r=y("h2"),r.textContent=a,h=j(),f=y("ol");for(let s=0;s<n.length;s+=1)n[s].c();i=j(),v=y("section"),D=y("h2"),D.textContent=A,S=j(),V=y("div");for(let s=0;s<p.length;s+=1)p[s].c();this.h()},l(s){ee(e.$$.fragment,s),t=M(s),l=w(s,"DIV",{});var o=I(l);r=w(o,"H2",{class:!0,"data-svelte-h":!0}),ve(r)!=="svelte-6t03ko"&&(r.textContent=a),h=M(o),f=w(o,"OL",{});var k=I(f);for(let R=0;R<n.length;R+=1)n[R].l(k);k.forEach(m),o.forEach(m),i=M(s),v=w(s,"SECTION",{class:!0});var Q=I(v);D=w(Q,"H2",{class:!0,"data-svelte-h":!0}),ve(D)!=="svelte-ow4spf"&&(D.textContent=A),S=M(Q),V=w(Q,"DIV",{class:!0});var z=I(V);for(let R=0;R<p.length;R+=1)p[R].l(z);z.forEach(m),Q.forEach(m),this.h()},h(){B(r,"class","svelte-1jmkil1"),B(D,"class","svelte-1jmkil1"),B(V,"class","grid svelte-1jmkil1"),B(v,"class","svelte-1jmkil1")},m(s,o){te(e,s,o),P(s,t,o),P(s,l,o),u(l,r),u(l,h),u(l,f);for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(f,null);P(s,i,o),P(s,v,o),u(v,D),u(v,S),u(v,V);for(let k=0;k<p.length;k+=1)p[k]&&p[k].m(V,null);$=!0},p(s,o){const k={};o&32771&&(k.$$scope={dirty:o,ctx:s}),e.$set(k),o&2&&(N=Z(s[1].rankings),ie(),n=ge(n,o,F,1,s,N,c,f,ke,Ve,null,Pe),oe()),o&2&&(H=Z(s[1].brackets),ie(),p=ge(p,o,K,1,s,H,g,V,ke,je,null,De),oe())},i(s){if(!$){T(e.$$.fragment,s);for(let o=0;o<N.length;o+=1)T(n[o]);for(let o=0;o<H.length;o+=1)T(p[o]);$=!0}},o(s){O(e.$$.fragment,s);for(let o=0;o<n.length;o+=1)O(n[o]);for(let o=0;o<p.length;o+=1)O(p[o]);$=!1},d(s){s&&(m(t),m(l),m(i),m(v)),le(e,s);for(let o=0;o<n.length;o+=1)n[o].d();for(let o=0;o<p.length;o+=1)p[o].d()}}}function ze(_){let e,t,l,r=Ie(_[1])+"",a,h;return e=new Ne({props:{failed:!0}}),{c(){x(e.$$.fragment),t=j(),l=y("div"),a=b(r),this.h()},l(f){ee(e.$$.fragment,f),t=M(f),l=w(f,"DIV",{class:!0});var n=I(l);a=E(n,r),n.forEach(m),this.h()},h(){B(l,"class","error")},m(f,n){te(e,f,n),P(f,t,n),P(f,l,n),u(l,a),h=!0},p(f,n){(!h||n&2)&&r!==(r=Ie(f[1])+"")&&q(a,r)},i(f){h||(T(e.$$.fragment,f),h=!0)},o(f){O(e.$$.fragment,f),h=!1},d(f){f&&(m(t),m(l)),le(e,f)}}}function Je(_){let e,t,l;return t=new Ne({}),{c(){e=y("div"),x(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var a=I(e);ee(t.$$.fragment,a),a.forEach(m),this.h()},h(){B(e,"class","loading")},m(r,a){P(r,e,a),te(t,e,null),l=!0},p:Me,i(r){l||(T(t.$$.fragment,r),l=!0)},o(r){O(t.$$.fragment,r),l=!1},d(r){r&&m(e),le(t)}}}function Ke(_){let e;return{c(){e=b("Grand Faire")},l(t){e=E(t,"Grand Faire")},m(t,l){P(t,e,l)},p:Me,d(t){t&&m(e)}}}function We(_){let e,t,l=_[0]!==void 0&&Se(_);return{c(){e=b("Market Day "),l&&l.c(),t=se()},l(r){e=E(r,"Market Day "),l&&l.l(r),t=se()},m(r,a){P(r,e,a),l&&l.m(r,a),P(r,t,a)},p(r,a){r[0]!==void 0?l?l.p(r,a):(l=Se(r),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(r){r&&(m(e),m(t)),l&&l.d(r)}}}function Se(_){let e=_[0]+1+"",t;return{c(){t=b(e)},l(l){t=E(l,e)},m(l,r){P(l,t,r)},p(l,r){r&1&&e!==(e=l[0]+1+"")&&q(t,e)},d(l){l&&m(t)}}}function Xe(_){let e,t,l,r,a,h,f=_[1].season+1+"",n,c,i,v,D=_[1].time.toLocaleString()+"",A;function S(g,$){return g[1].type=="scrimmage"?We:Ke}let V=S(_),p=V(_);return{c(){e=y("h1"),p.c(),t=b(`
      Summary`),l=j(),r=y("div"),a=y("a"),h=b("Season "),n=b(f),i=j(),v=y("div"),A=b(D),this.h()},l(g){e=w(g,"H1",{class:!0});var $=I(e);p.l($),t=E($,`
      Summary`),$.forEach(m),l=M(g),r=w(g,"DIV",{});var N=I(r);a=w(N,"A",{href:!0,class:!0});var F=I(a);h=E(F,"Season "),n=E(F,f),F.forEach(m),N.forEach(m),i=M(g),v=w(g,"DIV",{});var H=I(v);A=E(H,D),H.forEach(m),this.h()},h(){B(e,"class","svelte-1jmkil1"),B(a,"href",c=`${fe}/season?season=${_[1].season+1}`),B(a,"class","svelte-1jmkil1")},m(g,$){P(g,e,$),p.m(e,null),u(e,t),P(g,l,$),P(g,r,$),u(r,a),u(a,h),u(a,n),P(g,i,$),P(g,v,$),u(v,A)},p(g,$){V===(V=S(g))&&p?p.p(g,$):(p.d(1),p=V(g),p&&(p.c(),p.m(e,t))),$&2&&f!==(f=g[1].season+1+"")&&q(n,f),$&2&&c!==(c=`${fe}/season?season=${g[1].season+1}`)&&B(a,"href",c),$&2&&D!==(D=g[1].time.toLocaleString()+"")&&q(A,D)},d(g){g&&(m(e),m(l),m(r),m(i),m(v)),p.d()}}}function Ve(_,e){let t,l,r,a=ce(e[10].score)+"",h,f,n;return l=new Be({props:{name:e[10].name}}),{key:_,first:null,c(){t=y("li"),x(l.$$.fragment),r=b(`:
        `),h=b(a),f=j(),this.h()},l(c){t=w(c,"LI",{});var i=I(t);ee(l.$$.fragment,i),r=E(i,`:
        `),h=E(i,a),f=M(i),i.forEach(m),this.h()},h(){this.first=t},m(c,i){P(c,t,i),te(l,t,null),u(t,r),u(t,h),u(t,f),n=!0},p(c,i){e=c;const v={};i&2&&(v.name=e[10].name),l.$set(v),(!n||i&2)&&a!==(a=ce(e[10].score)+"")&&q(h,a)},i(c){n||(T(l.$$.fragment,c),n=!0)},o(c){O(l.$$.fragment,c),n=!1},d(c){c&&m(t),le(l)}}}function Le(_,e){let t,l,r,a=ce(e[10].score)+"",h,f,n;return l=new Be({props:{name:e[10].name}}),{key:_,first:null,c(){t=y("li"),x(l.$$.fragment),r=b(`:
              `),h=b(a),f=j(),this.h()},l(c){t=w(c,"LI",{});var i=I(t);ee(l.$$.fragment,i),r=E(i,`:
              `),h=E(i,a),f=M(i),i.forEach(m),this.h()},h(){this.first=t},m(c,i){P(c,t,i),te(l,t,null),u(t,r),u(t,h),u(t,f),n=!0},p(c,i){e=c;const v={};i&2&&(v.name=e[10].name),l.$set(v),(!n||i&2)&&a!==(a=ce(e[10].score)+"")&&q(h,a)},i(c){n||(T(l.$$.fragment,c),n=!0)},o(c){O(l.$$.fragment,c),n=!1},d(c){c&&m(t),le(l)}}}function je(_,e){let t,l,r,a,h=e[7].idx+1+"",f,n,c,i,v=e[7].rankings.length+"",D,A,S,V,p=e[7].matches.length+"",g,$,N=e[7].matches.length/Math.ceil(e[7].rankings.length/4)+"",F,H,K,s,o,k,Q,z,R,ue,J,W,$e="Bracket Ranking",_e,X,L=[],be=new Map,he,G,re=Z(e[7].rankings);const Ee=C=>C[10].address;for(let C=0;C<re.length;C+=1){let d=Ce(e,re,C),U=Ee(d);be.set(U,L[C]=Le(U,d))}return{key:_,first:null,c(){t=y("div"),l=y("div"),r=y("h3"),a=b("Bracket "),f=b(h),n=j(),c=y("div"),i=b("Players: "),D=b(v),A=j(),S=y("div"),V=b("Matches: "),g=b(p),$=b(`
          (`),F=b(N),H=b("pp)"),K=j(),s=y("div"),o=b("("),k=y("a"),Q=b("view matches"),R=b(")"),ue=j(),J=y("div"),W=y("h4"),W.textContent=$e,_e=j(),X=y("ol");for(let C=0;C<L.length;C+=1)L[C].c();he=j(),this.h()},l(C){t=w(C,"DIV",{});var d=I(t);l=w(d,"DIV",{});var U=I(l);r=w(U,"H3",{class:!0});var me=I(r);a=E(me,"Bracket "),f=E(me,h),me.forEach(m),U.forEach(m),n=M(d),c=w(d,"DIV",{});var de=I(c);i=E(de,"Players: "),D=E(de,v),de.forEach(m),A=M(d),S=w(d,"DIV",{});var Y=I(S);V=E(Y,"Matches: "),g=E(Y,p),$=E(Y,`
          (`),F=E(Y,N),H=E(Y,"pp)"),Y.forEach(m),K=M(d),s=w(d,"DIV",{});var ne=I(s);o=E(ne,"("),k=w(ne,"A",{href:!0,class:!0});var ye=I(k);Q=E(ye,"view matches"),ye.forEach(m),R=E(ne,")"),ne.forEach(m),ue=M(d),J=w(d,"DIV",{});var ae=I(J);W=w(ae,"H4",{"data-svelte-h":!0}),ve(W)!=="svelte-1pkemgk"&&(W.textContent=$e),_e=M(ae),X=w(ae,"OL",{});var we=I(X);for(let pe=0;pe<L.length;pe+=1)L[pe].l(we);we.forEach(m),ae.forEach(m),he=M(d),d.forEach(m),this.h()},h(){B(r,"class","svelte-1jmkil1"),B(k,"href",z=`${fe}/bracket?tournament=${e[1].id}&season=${e[1].season+1}&bracket=${e[7].idx+1}`),B(k,"class","svelte-1jmkil1"),this.first=t},m(C,d){P(C,t,d),u(t,l),u(l,r),u(r,a),u(r,f),u(t,n),u(t,c),u(c,i),u(c,D),u(t,A),u(t,S),u(S,V),u(S,g),u(S,$),u(S,F),u(S,H),u(t,K),u(t,s),u(s,o),u(s,k),u(k,Q),u(s,R),u(t,ue),u(t,J),u(J,W),u(J,_e),u(J,X);for(let U=0;U<L.length;U+=1)L[U]&&L[U].m(X,null);u(t,he),G=!0},p(C,d){e=C,(!G||d&2)&&h!==(h=e[7].idx+1+"")&&q(f,h),(!G||d&2)&&v!==(v=e[7].rankings.length+"")&&q(D,v),(!G||d&2)&&p!==(p=e[7].matches.length+"")&&q(g,p),(!G||d&2)&&N!==(N=e[7].matches.length/Math.ceil(e[7].rankings.length/4)+"")&&q(F,N),(!G||d&2&&z!==(z=`${fe}/bracket?tournament=${e[1].id}&season=${e[1].season+1}&bracket=${e[7].idx+1}`))&&B(k,"href",z),d&2&&(re=Z(e[7].rankings),ie(),L=ge(L,d,Ee,1,e,re,be,X,ke,Le,null,Ce),oe())},i(C){if(!G){for(let d=0;d<re.length;d+=1)T(L[d]);G=!0}},o(C){for(let d=0;d<L.length;d+=1)O(L[d]);G=!1},d(C){C&&m(t);for(let d=0;d<L.length;d+=1)L[d].d()}}}function Ye(_){let e,t,l,r;const a=[Je,ze,Qe],h=[];function f(n,c){return n[1]instanceof Promise?0:n[1]instanceof Error?1:n[1]?2:-1}return~(e=f(_))&&(t=h[e]=a[e](_)),{c(){t&&t.c(),l=se()},l(n){t&&t.l(n),l=se()},m(n,c){~e&&h[e].m(n,c),P(n,l,c),r=!0},p(n,c){let i=e;e=f(n),e===i?~e&&h[e].p(n,c):(t&&(ie(),O(h[i],1,1,()=>{h[i]=null}),oe()),~e?(t=h[e],t?t.p(n,c):(t=h[e]=a[e](n),t.c()),T(t,1),t.m(l.parentNode,l)):t=null)},i(n){r||(T(t),r=!0)},o(n){O(t),r=!1},d(n){n&&m(l),~e&&h[e].d(n)}}}function Ze(_){let e,t;return e=new qe({props:{title:"Tournament Details",$$slots:{default:[Ye]},$$scope:{ctx:_}}}),{c(){x(e.$$.fragment)},l(l){ee(e.$$.fragment,l)},m(l,r){te(e,l,r),t=!0},p(l,[r]){const a={};r&32771&&(a.$$scope={dirty:r,ctx:l}),e.$set(a)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){le(e,l)}}}function xe(_,e,t){let l;He(_,Te,i=>t(4,l=i));let r,a,h,f;const n=Ue(i=>t(1,f=i));function c(i){t(2,r=i.get("id")??void 0),t(3,h=Number(i.get("season")??"1")-1),t(0,a=Number(i.get("idx")??NaN)),isNaN(a)?t(0,a=void 0):t(0,a-=1)}return _.$$.update=()=>{_.$$.dirty&16&&c(l.url.searchParams),_.$$.dirty&12&&r&&n(async()=>{const i=await fetch(`${Oe}/results/tournament?${new URLSearchParams({id:r,season:h.toString()})}`);if(!i.ok)throw console.error(await i.text()),new Error(i.statusText);const v=await i.json();return{...v,time:new Date(v.time),brackets:v.brackets.sort((D,A)=>A.idx-D.idx)}})},[a,f,r,h,l]}class ot extends Fe{constructor(e){super(),Re(this,e,xe,Ze,Ae,{})}}export{ot as component};
